dis Maybe[T] {
    Nothing,
    Just(value: T)
}

fun get_value[T](x : Maybe[T]::Just) -> T { 
    ret x.value; 
}

fun or_default[T](x: Maybe[Maybe[T]], default: T) -> T {
    ret fit x {
        Nothing => default,
        Just Nothing => default,
        Just (Just _) => x.value.value
    };
}

fun main(a: Int) {
    or_default[Int] (Maybe[Maybe[Int]]::Just Maybe[Int]::Nothing) a;
}

main 42